{"version":3,"kind":"Notebook","sha256":"5cdfce6eb5f06a156ead347e6d2147540bd94e09a25e1ae757e4ab7b6e54447c","slug":"topo-map","location":"/topo_map.ipynb","dependencies":[],"frontmatter":{"title":"地形段彩図の描画","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/tktmyd/pygmt-howto-jp","copyright":"2021-2025. All Rights Reserved","settings":{"output_stderr":"remove-warn"},"numbering":{"title":{"offset":1}},"source_url":"https://github.com/tktmyd/pygmt-howto-jp/blob/main/src/topo_map.ipynb","edit_url":"https://github.com/tktmyd/pygmt-howto-jp/edit/main/src/topo_map.ipynb","exports":[{"format":"ipynb","filename":"topo_map.ipynb","url":"/pygmt-howto-jp/build/topo_map-ce743bb81d21ddf966ba88f2faffb81d.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GMTは","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XUAJmHy8tH"},{"type":"inlineCode","value":"(x, y, z)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fkPnosRuPf"},{"type":"text","value":" あるいは ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wGebhaRywH"},{"type":"inlineCode","value":"(lon, lat, z)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W3uek7x2xZ"},{"type":"text","value":" のような3次元データとしてNetCDF形式のデータ（通称グリッドデータ）を読むことができ，","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yjVEkAsMvk"},{"type":"inlineCode","value":"z","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IYZSwg1xMX"},{"type":"text","value":"軸の値に応じて色を割り当てることができます．ここでは特に地図としてよく用いられる地形段彩図の描画とその応用を扱います．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MYiJ8zL8fa"}],"key":"CW0vp8YJyp"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"まずは","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YrJUrCVU5l"},{"type":"inlineCode","value":"pygmt","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zTHC4EuvPu"},{"type":"text","value":"モジュールを読み込んでおきましょう．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EhJFuQThGU"}],"key":"oKsMenVgXo"}],"key":"dqa1O9oF9d"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import pygmt","visibility":"show","key":"pNjGGJ7Pxt"},{"type":"outputs","id":"GKFu-9xZbRNcTRlbdtKmq","children":[],"visibility":"show","key":"MLVKUpWrjB"}],"visibility":"show","key":"d10TmuKvyh"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GMTでは手持ちのNetCDF（","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UW7bROylyN"},{"type":"inlineCode","value":"grd","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LKzrpTBWQd"},{"type":"text","value":" or ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hmW6XL1tuS"},{"type":"inlineCode","value":"nc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GLSBdkMLSK"},{"type":"text","value":"）ファイルを描画するのはもちろん，GMT6以降ではネットワーク越しにグローバルな地形データを取得するコマンドが提供されています．そこで，ここではその ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mfWvzJsY38"},{"type":"inlineCode","value":"pygmt","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e7WotaylJ2"},{"type":"text","value":" 版を用いて，地形図の描画を行ってましょう．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FKqSyGyCSh"}],"key":"kazB43RpiA"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"地形データを読み込むには以下のようにします．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mvxcYNhlD1"}],"key":"G20cEThhXj"}],"visibility":"show","key":"R5kfWUGl7t"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"grid_data = pygmt.datasets.load_earth_relief(\n    resolution='01m',\n    region = [128, 150, 28, 50]\n)","visibility":"show","key":"k3OO8uqs1K"},{"type":"outputs","id":"edFdfP8xuE9DGQhhflp2t","children":[],"visibility":"show","key":"L5wOp6umEl"}],"visibility":"show","key":"rD8GYyweVw"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"上記のコマンドで，","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hErOMDtTUi"},{"type":"inlineCode","value":"region","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a3RNb8Y9Ir"},{"type":"text","value":" で指定した地域の地形を ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lGG8S0mARz"},{"type":"inlineCode","value":"resolution","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RalQy6FdyL"},{"type":"text","value":" の解像度で読み込み，左辺の変数（","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UlB6KYumPe"},{"type":"inlineCode","value":"grid_data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UyCM4TLUbZ"},{"type":"text","value":"）に格納します．この変数を用いてあとで地形図を作成します．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KqbPrzgXjr"}],"key":"RESTb8JLjN"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"region","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hBawCZHJvq"},{"type":"text","value":"の指定方法は地図と同じです．省略した場合には全世界のグローバルデータが読み込まれます．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RbV2CUrxrG"}],"key":"MoRtH7PgWv"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"resolution","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KkSl6NovI5"},{"type":"text","value":"は ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZwDqqp4D9N"},{"type":"inlineCode","value":"01d","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"lCsjbSzQ2D"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VgG4Q8fb83"},{"type":"inlineCode","value":"30m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nGx3LHFdx0"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CAeAkjcTsh"},{"type":"inlineCode","value":"20m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GyraGTOofh"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fq3dcos6KL"},{"type":"inlineCode","value":"15m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kKBR8gOAvW"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QIdc3YTLBk"},{"type":"inlineCode","value":"10m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wLPIO27Npp"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"H8ASPOeCBg"},{"type":"inlineCode","value":"06m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xMY5TQqa0u"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Pn6TaEwBM7"},{"type":"inlineCode","value":"05m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XH7vOYeOmX"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qC4FWTx0km"},{"type":"inlineCode","value":"04m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hnadryKfbh"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"x2BQuB9Q9A"},{"type":"inlineCode","value":"03m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wigq3shO80"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"adoiFs4v0L"},{"type":"inlineCode","value":"02m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HoYcvsZBHq"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YmpGSBiEjb"},{"type":"inlineCode","value":"01m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"w7SmDUzD41"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Go0M6z80gt"},{"type":"inlineCode","value":"30s","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"esExk2L35Y"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BpcAjaFOtj"},{"type":"inlineCode","value":"15s","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cxkB4f0ITd"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nOZ82uZyc0"},{"type":"inlineCode","value":"03s","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NwjZUVIqMT"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wljyRYllJ9"},{"type":"inlineCode","value":"01s","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"w38Ft1NfLV"},{"type":"text","value":" から，つまり1秒角から1度までのうちからどれか一つを選びます．","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NePky4w1y6"}],"key":"k8ZKl8i9Vj"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"ダウンロードされるデータはSRTM（Shuttle Rader Topography Mission）で，解像度によりデータソース（提供年）が異なるようです．また，1秒と3秒グリッドには海底地形データが存在しないため，15秒データから補間されます．ダウンロードしたデータは ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"MP6PxrHkiA"},{"type":"inlineCode","value":"~/.gmt/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YSiOj7klS1"},{"type":"text","value":" 以下にキャッシュされます．あまり細かいグリッドで広域のデータを読み込むと，ダウンロードにもプロットにも時間がかかりますし，ディスクスペースも消費しますので，注意してください．","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"RqVnqfk14g"}],"key":"dHsfygiD90"}],"visibility":"show","key":"UJ3nEhWFBz"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"まずはこの地形図をほとんどそのまま可視化してみましょう．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ApocXoHRGF"}],"key":"EynPQqJY4P"}],"visibility":"show","key":"bbWnlp8zGT"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = pygmt.Figure()\n\n# カラーマップ作成．以降ではこのCPTが自動的に使われる．\npygmt.makecpt(\n    cmap = 'geo', \n)\n\n# 標高と斜度データを可視化\nfig.grdimage(\n    projection = 'N138/12c', \n    region     = [128, 146, 30, 46], \n    grid       = grid_data,             # さきほど作成したデータを変数として渡す\n    frame      = ['WSen', 'xaf', 'yaf']\n)\n\nfig.show()","visibility":"show","key":"x5Pc0XKnlw"},{"type":"outputs","id":"KL4kCgQztcJx78Sz4ZdX-","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{"image/png":{"width":500}},"data":{"image/png":{"content_type":"image/png","hash":"24f8c31dab93dbcee4823d732f121901","path":"/24f8c31dab93dbcee4823d732f121901.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},"children":[],"key":"qm2b7C8Sos"}],"visibility":"show","key":"pdcMONX0VY"}],"visibility":"show","key":"hKrVC8sRET"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"これで色が付きました．海岸線を描画した代わりに ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xawdN4oW5n"},{"type":"inlineCode","value":"fig.grdimage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mszn6CllRq"},{"type":"text","value":" でさきほど作成した ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sSdUlvS6Pc"},{"type":"inlineCode","value":"grid_data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yNlXtAiQCj"},{"type":"text","value":" の値に応じて色を割り当てています．その値と色の対応テーブルを作成するのが ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BUbYiwlCyH"},{"type":"inlineCode","value":"pygmt.makecpt","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HS3CV0nGIo"},{"type":"text","value":" コマンドです．このコマンドではカラーマップのほか，値の範囲なども指定できます．ここでは，","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kptAOO3yPE"},{"type":"inlineCode","value":"geo","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jPjIwQiMAX"},{"type":"text","value":"というカラーマップだけを指定し，値の範囲は省略してデフォルトの状態に任せています．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E4ny68nrV8"}],"key":"VaSKGrPioO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"カラーマップの種類は","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LTMFKzUuui"},{"type":"link","url":"https://docs.generic-mapping-tools.org/latest/cookbook/cpts.html#built-in-color-palette-tables-cpt","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"GMTのcookbook","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"X6DqRTzzzV"}],"urlSource":"https://docs.generic-mapping-tools.org/latest/cookbook/cpts.html#built-in-color-palette-tables-cpt","key":"FWXlBkVjur"},{"type":"text","value":"に記載されています．とても種類が多いですが，地形の描画に向いているのは","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XpOjEUXTES"},{"type":"inlineCode","value":"earth","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zWKBEsPGZG"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FJSvgDTF65"},{"type":"inlineCode","value":"geo","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zlmgWmoqlv"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DDKxireJBZ"},{"type":"inlineCode","value":"etopo1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KQPYWfRGmv"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UiyzYSLH5f"},{"type":"inlineCode","value":"globe","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZCYONB1Pa8"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SeNQuwDFk2"},{"type":"inlineCode","value":"relief","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TseAfDgcYE"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LamOynNUZY"},{"type":"inlineCode","value":"terra","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XTwslzKwVL"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ht89estlhv"},{"type":"inlineCode","value":"world","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tiEky4wctz"},{"type":"text","value":"あたりです．ただし，このうち","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"W09jNS8hAJ"},{"type":"inlineCode","value":"terra","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"h45dKvs3bc"},{"type":"text","value":"と","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JHc5HNbV0m"},{"type":"inlineCode","value":"world","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kq5kYCeB3j"},{"type":"text","value":"はデフォルトのカラーパレットの範囲が日本海溝の最も深い部分をうまく表現できないようで，範囲の調整が必要になりそうです．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bygn2ZubHT"}],"key":"PKYpuE5rL0"}],"visibility":"show","key":"e5NVBlgFY8"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Tip","key":"lB0rBbMpKo"}],"key":"ml1hRgWw1N"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"GMTでは，cptファイルや地形のグリッドデータは，一旦ファイルに保存し，そのファイル名を ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"KoUnl5j7U9"},{"type":"inlineCode","value":"gmt grdimage","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"udiMztrLXA"},{"type":"text","value":" のオプションとして指定していました．それがPyGMTではグリッドデータについては変数で，cptファイルについては直前に生成したものが自動で，それぞれ読み込まれます．","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"nFOYwnOMqX"}],"key":"PYlUx96A6q"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"これは単純な作図では記述量が減って便利ですが，特に複数のcptファイルを使う複雑な絵ではかえってやっかいかもしれません．ですが，引数","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"p2ujzK5CF9"},{"type":"inlineCode","value":"cmap","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"g97Vm8Q1KZ"},{"type":"text","value":"にはあらかじめ作成しておいたcptファイルの名前を指定することでも実行可能です．","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"lRV0UjzHjr"},{"type":"inlineCode","value":"grid","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fCjxw3LCIq"},{"type":"text","value":"についても同様で，Python以外の環境で作成した既存のNetCDFファイル名を指定してそれを直接読み込み，可視化することができます．","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qplekUE0SM"}],"key":"jRKhHJURRo"}],"key":"lShYzpYDJc"}],"visibility":"show","key":"N2pgBaahy2"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"より凝った段彩図の描画","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lGFyvtOr19"}],"identifier":"id","label":"より凝った段彩図の描画","html_id":"id","implicit":true,"key":"tkGQOXn9zo"}],"visibility":"show","key":"KhksDa4Jcy"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"段彩図をより見栄え良くするには，","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZdMfDtG3YN"},{"type":"inlineCode","value":"grdgradient","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q7O9ksVXvq"},{"type":"text","value":"による傾斜データの作成と利用が有効です．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"b3iPb4qb79"}],"key":"ZX7rzBIO5r"}],"visibility":"show","key":"jdgQzzeMlF"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"gradient_data = pygmt.grdgradient(\n    grid      = grid_data,\n    azimuth   = [45, 135], \n    normalize = 'e0.7'\n)","visibility":"show","key":"MmqESMTtWR"},{"type":"outputs","id":"C3kaqxja5uF5QNeuG2fBh","children":[],"visibility":"show","key":"G3uyDPy8ZX"}],"visibility":"show","key":"GE1AIWJ8my"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GMTの ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"shP8RNRQTj"},{"type":"inlineCode","value":"grdgradient","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"f9pYOkpf0D"},{"type":"text","value":" と同じですが，地形の可視化に用いる場合には方角 ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B0dkfAiuAP"},{"type":"inlineCode","value":"azimuth","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ktYybRl7rX"},{"type":"text","value":" を複数方向の組み合わせにし，かつ ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yT6629NZFx"},{"type":"inlineCode","value":"normalize","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DnIheRCztK"},{"type":"text","value":" を上記の例程度の値にしておくのが良いようです．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"meVTibEdSV"}],"key":"MZyYUvJ1Rh"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"ToDo","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"E7BBtuV2YL"}],"key":"maPVGFJzNC"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://www.pygmt.org/dev/gallery/images/grdgradient.html#sphx-glr-gallery-images-grdgradient-py","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Demo","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"t3p1yD3kFN"}],"urlSource":"https://www.pygmt.org/dev/gallery/images/grdgradient.html#sphx-glr-gallery-images-grdgradient-py","key":"WBhbV27j8E"},{"type":"text","value":"を見ると，","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"zTx7bM3suj"},{"type":"inlineCode","value":"radiance","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"H3aCIoYWCq"},{"type":"text","value":"パラメータにより計算した","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"DUuvGusNwW"},{"type":"inlineCode","value":"grd","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fhO9itaa0X"},{"type":"text","value":"データで地形可視化を行っている．要調査．","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"GfyhoPmUQW"}],"key":"J8oeykvQhq"}],"key":"vlfWjMOCJ9"}],"visibility":"show","key":"qN2mhfEiLD"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = pygmt.Figure()\n\n# カラーマップ作成．以降ではこのCPTが自動的に使われる．\npygmt.makecpt(\n    cmap = 'geo', \n)\n\n# 標高と斜度データを可視化\nfig.grdimage(\n    projection = 'N138/12c', \n    region     = [128, 146, 30, 46], \n    grid       = grid_data, \n    shading    = gradient_data\n)\n\n# 海岸線描画と海域を半透明シェーディング\nfig.coast(\n    area_thresh = '100', \n    water       = 'black@80',\n)\n\n# 距離スケールの背景のための領域\nfig.plot(\n    data = [[139, 31], [145,31], [145,32.5], [139,32.5]], \n    fill = 'white',\n    transparency = 20,\n    straight_line = True    \n)\n\n# もう一度海岸線\nfig.coast(\n    area_thresh = '100', \n    map_scale   = '142/32/32/500',\n    shorelines  = 'faint,black',\n    frame       = ['WSen', 'xaf', 'yaf']\n)\nfig.show()","visibility":"show","key":"t3F0ONrJp9"},{"type":"outputs","id":"fCJsKRE9zd4ecoPu5fbkN","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{"image/png":{"width":500}},"data":{"image/png":{"content_type":"image/png","hash":"5d7a015afe45e47d5b037c5520b2188c","path":"/5d7a015afe45e47d5b037c5520b2188c.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},"children":[],"key":"Vbjo8w6B9r"}],"visibility":"show","key":"ciWCsdvjYn"}],"visibility":"show","key":"JPAU9sVkdl"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"ここでは，見た目を向上させるテクニックを2つほど使っています．どちらもPyGMT以外の話題も含みますが，すこし詳しく解説しておきましょう．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WaAFNEmBVz"}],"key":"ZmeKxrf8E6"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"まず，単に ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"V8BDtOYzGd"},{"type":"inlineCode","value":"fig.grdimage","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ScWZ2lQaXt"},{"type":"text","value":" で色を塗るだけでなく，その上に海岸線を描画しています．さらに，この例で用いた ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"haDrGHl14T"},{"type":"inlineCode","value":"earth","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"d86hJFIIy5"},{"type":"text","value":" カラーパレットは陸域と海域の差が目立たなかったため，","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Pd92z2atX8"},{"type":"inlineCode","value":"fig.coast","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JkYi6mbDcA"},{"type":"text","value":" の ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pvf98Ki1BU"},{"type":"inlineCode","value":"water","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pN29uGTErF"},{"type":"text","value":" で透明度80%の黒色（","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bBN5Xed84Q"},{"type":"inlineCode","value":"black@80","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oL9iJ1UINM"},{"type":"text","value":"）で海域を塗りつぶすことで，相対的に陸域が浮かび上がって見えるように工夫しています．色名のあとの","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tApFAbzS6e"},{"type":"inlineCode","value":"@","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"M06rRYOYdH"},{"type":"text","value":"は透明度指定で，100に近いほど透明度が高くなります．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BfRm4jkNv1"},{"type":"inlineCode","value":"water = 'black@80","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aUPiblghaY"},{"type":"text","value":" の行をコメントアウトして実行してみると，その差が実感できるでしょう．ただし，このテクニックを使うともとの色を改変することになりますので，カラースケールを表示してもその色が正確ではなくなりますので，注意が必要です．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Scw9P8NojN"}],"key":"A1ezMUDHRo"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"一方，地図の距離スケール（","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nFv99xl9RF"},{"type":"inlineCode","value":"fig.pscoast","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ldpwGTnvcD"},{"type":"text","value":"の","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZKLAR6MwZZ"},{"type":"inlineCode","value":"map-scale","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"R2YcBA2xkD"},{"type":"text","value":"オプション）をカラフルなカラーマップ上に描画すると，視認性がとても低くなってしまいます．そこで，","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gSDxkdd14q"},{"type":"inlineCode","value":"fig.plot()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zl5dYa94Xo"},{"type":"text","value":" で四角形の頂点を与え，半透明の白い「箱」を先に描画しています．これは順番が大事で，","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XVDdAhxqz3"},{"type":"inlineCode","value":"fig.coast()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hpmIDTsGXi"},{"type":"text","value":"の","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Gt7rqXduJg"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"前","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PALUItrC9Q"}],"key":"N847SGL5xE"},{"type":"text","value":"に予め箱を描画しておかないと，せっかくの地図スケールを塗りつぶしてしまうことになりかねません．","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cidFFRvErQ"},{"type":"inlineCode","value":"fig.plot()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SNxZXeIv1k"},{"type":"text","value":" には四隅の頂点を2次元配列として ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PUl8qTNj7O"},{"type":"inlineCode","value":"data=","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bQqQSxIZoi"},{"type":"text","value":" オプションに与えていますが，x軸とy軸の1次元配列を個別に ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"roGLMoZ8Ib"},{"type":"inlineCode","value":"x = ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mwRTSkwZX1"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Ki70XAYEP9"},{"type":"inlineCode","value":"y = ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qlsfWMKu92"},{"type":"text","value":" として与えることもできます．なお，地図上に頂点を指定してポリゴンを描画すると，デフォルトではその辺が地図上の大円経路に沿った線として描画されます．結果として，地図投影上は曲がった線に見えてしまいます．これを避けているのが","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"W0lbzM4FHP"},{"type":"inlineCode","value":" straight_line = True","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DZ9LmyX2Ee"},{"type":"text","value":" オプションです．","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OMFoErWjZw"}],"key":"afRdbUXeGp"},{"type":"admonition","kind":"important","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Important","key":"nmH86ItFno"}],"key":"rwSxr9iZQF"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"fig.plot()","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"bOCPWMbiAJ"},{"type":"text","value":"のオプション ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"nE5BHG5PTo"},{"type":"inlineCode","value":"fill=","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"w3x1i5gRYU"},{"type":"text","value":" はその名のとおり塗りつぶしの色を指定するオプションですが，PyGMT v0.8.0 までは，このオプションは ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"uZvqH47mNp"},{"type":"inlineCode","value":"color=","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"S3WHTYE108"},{"type":"text","value":" であったものが，オプション名の変更がなされたようです．しばらくの移行期間を経て，v0.12.0 以降では","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"kABmn1Cfln"},{"type":"inlineCode","value":"color","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"IcjNCCd4Tw"},{"type":"text","value":"オプションは動作しなくなりました．","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"DAm32YltLz"}],"key":"aKG9jeM4wa"}],"key":"h9415sP3f8"}],"visibility":"show","key":"VwGX8b8Jkp"}],"key":"gIoCHBEojf"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"画像の保存","url":"/savefig","group":"基本編"},"next":{"title":"xyグラフの描画","url":"/xy","group":"基本編"}}},"domain":"http://localhost:3001"}