{"version":2,"kind":"Notebook","sha256":"5cdfce6eb5f06a156ead347e6d2147540bd94e09a25e1ae757e4ab7b6e54447c","slug":"topo-map","location":"/topo_map.ipynb","dependencies":[],"frontmatter":{"title":"地形段彩図の描画","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/tktmyd/pygmt-howto-jp","copyright":"2021-2025. All Rights Reserved","source_url":"https://github.com/tktmyd/pygmt-howto-jp/blob/main/src/topo_map.ipynb","edit_url":"https://github.com/tktmyd/pygmt-howto-jp/edit/main/src/topo_map.ipynb","exports":[{"format":"ipynb","filename":"topo_map.ipynb","url":"https://tktmyd.github.io/pygmt-howto-jp/build/topo_map-ded5b3cb4d7e0fd759efff5d04588091.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GMTは","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jvk95ttKDy"},{"type":"inlineCode","value":"(x, y, z)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eijH5WjN9w"},{"type":"text","value":" あるいは ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CGDF7AbNqS"},{"type":"inlineCode","value":"(lon, lat, z)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cRYy6qqYt1"},{"type":"text","value":" のような3次元データとしてNetCDF形式のデータ（通称グリッドデータ）を読むことができ，","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WSMYU3lS8C"},{"type":"inlineCode","value":"z","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vx6o3XiYsa"},{"type":"text","value":"軸の値に応じて色を割り当てることができます．ここでは特に地図としてよく用いられる地形段彩図の描画とその応用を扱います．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DTUJLa1dbh"}],"key":"CtwSPiMbYH"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"まずは","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DeR48QqxKe"},{"type":"inlineCode","value":"pygmt","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MNvusnnjGp"},{"type":"text","value":"モジュールを読み込んでおきましょう．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"x5Anro0K8u"}],"key":"SvcJ6ZcrYF"}],"key":"rv1EdjS8AJ"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import pygmt","visibility":"show","key":"B02UaHRx1s"},{"type":"output","id":"BPEeWpRayLZCOCKHGplJW","data":[],"visibility":"show","key":"WAscBu6aWs"}],"visibility":"show","key":"a39oHR8RuO"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GMTでは手持ちのNetCDF（","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KTeIZwgUfc"},{"type":"inlineCode","value":"grd","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wAYodiN9ol"},{"type":"text","value":" or ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DeYAzK4qu7"},{"type":"inlineCode","value":"nc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jgs8Ju5R6H"},{"type":"text","value":"）ファイルを描画するのはもちろん，GMT6以降ではネットワーク越しにグローバルな地形データを取得するコマンドが提供されています．そこで，ここではその ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JawZgsBjWr"},{"type":"inlineCode","value":"pygmt","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aNi9CcKJpz"},{"type":"text","value":" 版を用いて，地形図の描画を行ってましょう．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZKEn18hSos"}],"key":"VTmN9nS9e3"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"地形データを読み込むには以下のようにします．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WQT2d3EXEG"}],"key":"GLjrfdAHCq"}],"visibility":"show","key":"UvuPQvYJgy"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"grid_data = pygmt.datasets.load_earth_relief(\n    resolution='01m',\n    region = [128, 150, 28, 50]\n)","visibility":"show","key":"l23pEsSome"},{"type":"output","id":"9ZWXyR6JpCFcPoYVsPdD_","data":[{"name":"stderr","output_type":"stream","text":"grdblend [NOTICE]: Remote data courtesy of GMT data server oceania [http://oceania.generic-mapping-tools.org]\ngrdblend [NOTICE]: SRTM15 Earth Relief v2.7 at 01x01 arc minutes reduced by Gaussian Cartesian filtering (5.2 km fullwidth) [Tozer et al., 2019].\ngrdblend [NOTICE]:   -> Download 30x30 degree grid tile (earth_relief_01m_g): N00E120\n"}],"visibility":"show","key":"w7X6xHpHXO"}],"visibility":"show","key":"wcI5V2VKBH"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"上記のコマンドで，","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vDYWiUxwep"},{"type":"inlineCode","value":"region","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OdG2S1AAwh"},{"type":"text","value":" で指定した地域の地形を ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aRoxM0uEEt"},{"type":"inlineCode","value":"resolution","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wvrpBvB0Wd"},{"type":"text","value":" の解像度で読み込み，左辺の変数（","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sjknt6Y8kJ"},{"type":"inlineCode","value":"grid_data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e8zRRv7M0p"},{"type":"text","value":"）に格納します．この変数を用いてあとで地形図を作成します．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HWS0pfY4r1"}],"key":"ou2vJnn7pU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"region","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vEcEi3bjRu"},{"type":"text","value":"の指定方法は地図と同じです．省略した場合には全世界のグローバルデータが読み込まれます．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XQUYNvKy13"}],"key":"RorODUTH8a"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"resolution","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"m6GfwWOx2u"},{"type":"text","value":"は ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QbRxrlKYsx"},{"type":"inlineCode","value":"01d","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"trb5G3qmJ6"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"alxvyW0aEg"},{"type":"inlineCode","value":"30m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kJ7g6sq4xE"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QaLYDB4I8a"},{"type":"inlineCode","value":"20m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qlvG22ItjB"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"i7xcZvKoKw"},{"type":"inlineCode","value":"15m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pMDtJXYL9E"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"W7HSMagBFw"},{"type":"inlineCode","value":"10m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zIZBAyqmGp"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"c0y81eSfjc"},{"type":"inlineCode","value":"06m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SJZvcODeVA"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Q7E9889IPM"},{"type":"inlineCode","value":"05m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"JyklHVGII0"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"C61NtLu2DX"},{"type":"inlineCode","value":"04m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pqtFtYqMEn"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nyNMhs44Hf"},{"type":"inlineCode","value":"03m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"izVsyuuQJZ"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OqBiKHg4Nd"},{"type":"inlineCode","value":"02m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NQZEfXcIyl"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fSCdeQf2zY"},{"type":"inlineCode","value":"01m","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Bp6Wj4Gyx9"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XG5NebnOUv"},{"type":"inlineCode","value":"30s","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Ach4PoGbDA"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"aJhRDLsvKB"},{"type":"inlineCode","value":"15s","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gRrTi7ORB5"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OI00bzzJBT"},{"type":"inlineCode","value":"03s","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nZCu4mmrmw"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GYYaTelfeL"},{"type":"inlineCode","value":"01s","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HljrZCPzED"},{"type":"text","value":" から，つまり1秒角から1度までのうちからどれか一つを選びます．","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BGiC2DqFO1"}],"key":"Wcar24Czn6"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"ダウンロードされるデータはSRTM（Shuttle Rader Topography Mission）で，解像度によりデータソース（提供年）が異なるようです．また，1秒と3秒グリッドには海底地形データが存在しないため，15秒データから補間されます．ダウンロードしたデータは ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qaXuMWJIin"},{"type":"inlineCode","value":"~/.gmt/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"IwGU4lXZX6"},{"type":"text","value":" 以下にキャッシュされます．あまり細かいグリッドで広域のデータを読み込むと，ダウンロードにもプロットにも時間がかかりますし，ディスクスペースも消費しますので，注意してください．","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"SNpIUOeFFz"}],"key":"A5ahW0efJN"}],"visibility":"show","key":"fftRxGfuZR"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"まずはこの地形図をほとんどそのまま可視化してみましょう．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CMIYsqLx33"}],"key":"VdM6g0TZeG"}],"visibility":"show","key":"dL4cgT462p"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = pygmt.Figure()\n\n# カラーマップ作成．以降ではこのCPTが自動的に使われる．\npygmt.makecpt(\n    cmap = 'geo', \n)\n\n# 標高と斜度データを可視化\nfig.grdimage(\n    projection = 'N138/12c', \n    region     = [128, 146, 30, 46], \n    grid       = grid_data,             # さきほど作成したデータを変数として渡す\n    frame      = ['WSen', 'xaf', 'yaf']\n)\n\nfig.show()","visibility":"show","key":"ae8QjrzZbl"},{"type":"output","id":"HnPs3ostWKLHQoSKHS1hi","data":[{"output_type":"display_data","metadata":{"image/png":{"width":500}},"data":{"image/png":{"content_type":"image/png","hash":"24f8c31dab93dbcee4823d732f121901","path":"https://tktmyd.github.io/pygmt-howto-jp/build/24f8c31dab93dbcee4823d732f121901.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"visibility":"show","key":"ao5SiFuWCC"}],"visibility":"show","key":"Lin933f4tK"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"これで色が付きました．海岸線を描画した代わりに ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Cou4cObM4D"},{"type":"inlineCode","value":"fig.grdimage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B9jpqurwZ6"},{"type":"text","value":" でさきほど作成した ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"C2lC99iiQd"},{"type":"inlineCode","value":"grid_data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q8N6g7fLQ6"},{"type":"text","value":" の値に応じて色を割り当てています．その値と色の対応テーブルを作成するのが ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a5AYVZwVe4"},{"type":"inlineCode","value":"pygmt.makecpt","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LVRUG1bsBh"},{"type":"text","value":" コマンドです．このコマンドではカラーマップのほか，値の範囲なども指定できます．ここでは，","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YnXWqNalYS"},{"type":"inlineCode","value":"geo","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PPhQD7Cabg"},{"type":"text","value":"というカラーマップだけを指定し，値の範囲は省略してデフォルトの状態に任せています．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LEZ0MsqirX"}],"key":"bcp0TLTo1D"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"カラーマップの種類は","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DpLdlmajeP"},{"type":"link","url":"https://docs.generic-mapping-tools.org/latest/cookbook/cpts.html#built-in-color-palette-tables-cpt","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"GMTのcookbook","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CyJ1BJlE6Y"}],"urlSource":"https://docs.generic-mapping-tools.org/latest/cookbook/cpts.html#built-in-color-palette-tables-cpt","key":"ULwkbxprPj"},{"type":"text","value":"に記載されています．とても種類が多いですが，地形の描画に向いているのは","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Xj1iO3fgwE"},{"type":"inlineCode","value":"earth","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"reK9afqACg"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SJsY3U5qqz"},{"type":"inlineCode","value":"geo","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"U1aTcnoSJC"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yeNAmzALYw"},{"type":"inlineCode","value":"etopo1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KylUe7ZbM1"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fNo6QRYogG"},{"type":"inlineCode","value":"globe","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"T7CmeFQdGt"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"E76w8T3rZb"},{"type":"inlineCode","value":"relief","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UaWX7609nt"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rZV4tnDo5G"},{"type":"inlineCode","value":"terra","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CsVoppaIZH"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bxGbA5l9UJ"},{"type":"inlineCode","value":"world","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mWks91HEfl"},{"type":"text","value":"あたりです．ただし，このうち","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SHjBPkO26g"},{"type":"inlineCode","value":"terra","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HoUHR8MPcx"},{"type":"text","value":"と","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lodetqXRjU"},{"type":"inlineCode","value":"world","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ymZbi5CRWW"},{"type":"text","value":"はデフォルトのカラーパレットの範囲が日本海溝の最も深い部分をうまく表現できないようで，範囲の調整が必要になりそうです．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nC1FvzSXig"}],"key":"j6WUIIbCNt"}],"visibility":"show","key":"fUF7DSoFnE"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"admonition","kind":"tip","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Tip","key":"sqw1X8Uvj8"}],"key":"OVZFNvkfQo"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"GMTでは，cptファイルや地形のグリッドデータは，一旦ファイルに保存し，そのファイル名を ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kWFZAB7j27"},{"type":"inlineCode","value":"gmt grdimage","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"d3wvk2mbZk"},{"type":"text","value":" のオプションとして指定していました．それがPyGMTではグリッドデータについては変数で，cptファイルについては直前に生成したものが自動で，それぞれ読み込まれます．","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"WpMDmAQbC0"}],"key":"VxfaEgjX27"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"これは単純な作図では記述量が減って便利ですが，特に複数のcptファイルを使う複雑な絵ではかえってやっかいかもしれません．ですが，引数","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"NJiG9D3P4q"},{"type":"inlineCode","value":"cmap","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"UUGT8AhMbH"},{"type":"text","value":"にはあらかじめ作成しておいたcptファイルの名前を指定することでも実行可能です．","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"R28WZGYtvY"},{"type":"inlineCode","value":"grid","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QCPGCFvwZO"},{"type":"text","value":"についても同様で，Python以外の環境で作成した既存のNetCDFファイル名を指定してそれを直接読み込み，可視化することができます．","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fnvZ12vePR"}],"key":"tfExif0fzX"}],"key":"H3V1OQLeiv"}],"visibility":"show","key":"PXgqt7qs8v"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"より凝った段彩図の描画","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zuLA377HMG"}],"identifier":"id","label":"より凝った段彩図の描画","html_id":"id","implicit":true,"key":"RUARMwAmee"}],"visibility":"show","key":"DkOL3gbJx1"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"段彩図をより見栄え良くするには，","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yl6bS2IWPr"},{"type":"inlineCode","value":"grdgradient","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XcVca5ZPP3"},{"type":"text","value":"による傾斜データの作成と利用が有効です．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LNZEphrklf"}],"key":"hxU6Kn6myv"}],"visibility":"show","key":"XnzhZRehwU"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"gradient_data = pygmt.grdgradient(\n    grid      = grid_data,\n    azimuth   = [45, 135], \n    normalize = 'e0.7'\n)","visibility":"show","key":"ulIPHGR5z5"},{"type":"output","id":"X4b9BJUZW58qMnf56U8eu","data":[],"visibility":"show","key":"zCatptmSk0"}],"visibility":"show","key":"eUDUPMh1ZR"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GMTの ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h9liiOMw3T"},{"type":"inlineCode","value":"grdgradient","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tjV2GhcL2x"},{"type":"text","value":" と同じですが，地形の可視化に用いる場合には方角 ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jz3Zx8Bvhr"},{"type":"inlineCode","value":"azimuth","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bFwFpAaqxe"},{"type":"text","value":" を複数方向の組み合わせにし，かつ ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lVLichbETH"},{"type":"inlineCode","value":"normalize","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KOYLFV8xSs"},{"type":"text","value":" を上記の例程度の値にしておくのが良いようです．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uofUg5sSig"}],"key":"Rl2pCwVhHW"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"ToDo","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"G3n0AHewBX"}],"key":"d9QVc6iJRB"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"link","url":"https://www.pygmt.org/dev/gallery/images/grdgradient.html#sphx-glr-gallery-images-grdgradient-py","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Demo","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"vo4Lx1rlQ9"}],"urlSource":"https://www.pygmt.org/dev/gallery/images/grdgradient.html#sphx-glr-gallery-images-grdgradient-py","key":"uXN3iG4FIw"},{"type":"text","value":"を見ると，","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"avW87Dkdsg"},{"type":"inlineCode","value":"radiance","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qVaezHkNhR"},{"type":"text","value":"パラメータにより計算した","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"LdQny5gwVI"},{"type":"inlineCode","value":"grd","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Zgd9MU9bmU"},{"type":"text","value":"データで地形可視化を行っている．要調査．","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VQCUeC2Uza"}],"key":"hX0UBBew0z"}],"key":"b7q2Tx798X"}],"visibility":"show","key":"z0toqJ6ui9"},{"type":"block","kind":"notebook-code","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = pygmt.Figure()\n\n# カラーマップ作成．以降ではこのCPTが自動的に使われる．\npygmt.makecpt(\n    cmap = 'geo', \n)\n\n# 標高と斜度データを可視化\nfig.grdimage(\n    projection = 'N138/12c', \n    region     = [128, 146, 30, 46], \n    grid       = grid_data, \n    shading    = gradient_data\n)\n\n# 海岸線描画と海域を半透明シェーディング\nfig.coast(\n    area_thresh = '100', \n    water       = 'black@80',\n)\n\n# 距離スケールの背景のための領域\nfig.plot(\n    data = [[139, 31], [145,31], [145,32.5], [139,32.5]], \n    fill = 'white',\n    transparency = 20,\n    straight_line = True    \n)\n\n# もう一度海岸線\nfig.coast(\n    area_thresh = '100', \n    map_scale   = '142/32/32/500',\n    shorelines  = 'faint,black',\n    frame       = ['WSen', 'xaf', 'yaf']\n)\nfig.show()","visibility":"show","key":"Savpwrr8p8"},{"type":"output","id":"7BjVicHu6UwlwRu8IwzDS","data":[{"output_type":"display_data","metadata":{"image/png":{"width":500}},"data":{"image/png":{"content_type":"image/png","hash":"5d7a015afe45e47d5b037c5520b2188c","path":"https://tktmyd.github.io/pygmt-howto-jp/build/5d7a015afe45e47d5b037c5520b2188c.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"visibility":"show","key":"bunoWs6H7V"}],"visibility":"show","key":"UDxojr3w0c"},{"type":"block","kind":"notebook-content","data":{"editable":true,"slideshow":{"slide_type":""},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"ここでは，見た目を向上させるテクニックを2つほど使っています．どちらもPyGMT以外の話題も含みますが，すこし詳しく解説しておきましょう．","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FuDzQuWn4q"}],"key":"quHm9gcVus"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"まず，単に ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fpfv5WMb20"},{"type":"inlineCode","value":"fig.grdimage","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ctayex7Ufz"},{"type":"text","value":" で色を塗るだけでなく，その上に海岸線を描画しています．さらに，この例で用いた ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"F0WQWFQBys"},{"type":"inlineCode","value":"earth","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zuDmm0GWL4"},{"type":"text","value":" カラーパレットは陸域と海域の差が目立たなかったため，","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LPg2HFG0qC"},{"type":"inlineCode","value":"fig.coast","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MfZTEcVXXZ"},{"type":"text","value":" の ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jMAYvNwJQU"},{"type":"inlineCode","value":"water","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uLoV7HNC2w"},{"type":"text","value":" で透明度80%の黒色（","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eaLVJcbRcN"},{"type":"inlineCode","value":"black@80","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"u00Be2Clp4"},{"type":"text","value":"）で海域を塗りつぶすことで，相対的に陸域が浮かび上がって見えるように工夫しています．色名のあとの","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MKDYGZHel7"},{"type":"inlineCode","value":"@","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ASRZLdQ9bY"},{"type":"text","value":"は透明度指定で，100に近いほど透明度が高くなります．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Aq7rSwOEyE"},{"type":"inlineCode","value":"water = 'black@80","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fPIkLWL53m"},{"type":"text","value":" の行をコメントアウトして実行してみると，その差が実感できるでしょう．ただし，このテクニックを使うともとの色を改変することになりますので，カラースケールを表示してもその色が正確ではなくなりますので，注意が必要です．","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CrcPOI9ZuV"}],"key":"VZSGAQu906"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"一方，地図の距離スケール（","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ha5CdZ3Ovj"},{"type":"inlineCode","value":"fig.pscoast","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sLjfa6wPJz"},{"type":"text","value":"の","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"crLYCl7Nhc"},{"type":"inlineCode","value":"map-scale","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zurmdsBome"},{"type":"text","value":"オプション）をカラフルなカラーマップ上に描画すると，視認性がとても低くなってしまいます．そこで，","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iWHq3xOlm4"},{"type":"inlineCode","value":"fig.plot()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yhJQ8PtTq2"},{"type":"text","value":" で四角形の頂点を与え，半透明の白い「箱」を先に描画しています．これは順番が大事で，","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"k73qzN5ntI"},{"type":"inlineCode","value":"fig.coast()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MBQ6u3Hy0d"},{"type":"text","value":"の","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"uJQOyrGKcN"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"前","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"RG7Uici5vZ"}],"key":"a79RhCPtG7"},{"type":"text","value":"に予め箱を描画しておかないと，せっかくの地図スケールを塗りつぶしてしまうことになりかねません．","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"K6j0Iyyzef"},{"type":"inlineCode","value":"fig.plot()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nCc3711Ukg"},{"type":"text","value":" には四隅の頂点を2次元配列として ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MbLkfGR5Y1"},{"type":"inlineCode","value":"data=","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iriCUuYZkO"},{"type":"text","value":" オプションに与えていますが，x軸とy軸の1次元配列を個別に ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TDjQtPDBOJ"},{"type":"inlineCode","value":"x = ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WjLLTa7h7h"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bRiXxWUVsO"},{"type":"inlineCode","value":"y = ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hMeULvFR2X"},{"type":"text","value":" として与えることもできます．なお，地図上に頂点を指定してポリゴンを描画すると，デフォルトではその辺が地図上の大円経路に沿った線として描画されます．結果として，地図投影上は曲がった線に見えてしまいます．これを避けているのが","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zPL76dewb7"},{"type":"inlineCode","value":" straight_line = True","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"qjMvQsfoej"},{"type":"text","value":" オプションです．","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gyqXptlwyF"}],"key":"RGq82VL6dH"},{"type":"admonition","kind":"important","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Important","key":"nQq8O8Rw8W"}],"key":"sc0TXFdAMB"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"fig.plot()","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Z4oVod0lLE"},{"type":"text","value":"のオプション ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"u78rStucm3"},{"type":"inlineCode","value":"fill=","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"PAZOEtz7BJ"},{"type":"text","value":" はその名のとおり塗りつぶしの色を指定するオプションですが，PyGMT v0.8.0 までは，このオプションは ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"cPH6gntdfk"},{"type":"inlineCode","value":"color=","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"tgMOidUVO0"},{"type":"text","value":" であったものが，オプション名の変更がなされたようです．しばらくの移行期間を経て，v0.12.0 以降では","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"JPhGdUznhr"},{"type":"inlineCode","value":"color","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"y6Ar4tLjyd"},{"type":"text","value":"オプションは動作しなくなりました．","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"vLJs7gCUv2"}],"key":"b8GAGtgQWT"}],"key":"FoNC5xLPBh"}],"visibility":"show","key":"ncBigGV0Zm"}],"key":"a2Nz7FtjI5"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"画像の保存","url":"/savefig","group":"PyGMT-HOWTO"},"next":{"title":"xyグラフの描画","url":"/xy","group":"PyGMT-HOWTO"}}},"domain":"http://localhost:3000"}